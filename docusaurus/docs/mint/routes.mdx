import useBaseUrl from '@docusaurus/useBaseUrl';

---
title: Routes
---

## Customize Dynamic Routes
The "Mint" application contains 2 main routes:

| Path         | Description                                                                                                                                                     | Guard |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----- |
| **home**     | contains the latest searches<br/>allows performing a search<br/>allows viewing pinned documents                                                                 | yes   |
| **search**   | allows performing searches                                                                                                                                      | yes   |
| login/logout | are only useful if you want to manage specific login/logout states. They are not used here although the routes are accessible.                                  |       |
| error        | is used in case an unexpected error occurs to prevent the application from being in an uncertain state.                                                         |       |
| loading      | is used when the application is initializing to allow waiting while essential data is being loaded.                                                             |       |

But it can contain much more according to your needs.

:::warning
**search** is a special route that is dynamically generated by default.
But this behavior can be changed as we will see later.
:::

:::note
To add routes, simply modify the **app.routes.ts** file.
:::

Some default routes are protected by "guards".
These **guards** restrict access to routes:
- if you are not authenticated **AuthGuard()**
- if the application is not fully initialized **InitializationGuard()**

### How does dynamic route generation work?
Everything happens at the **app.component.ts** component level.

```ts title="app.component.ts"
this.applicationService.autoLogin()
	.then((success) => {
	  if (success) {
		/* ... */
	  }
	})
	.catch((err) => { /* ... */ });
```

The _autoLogin()_ function of the **Application** service dynamically constructs the **search** route if the authentication is successful, and only this part. All other routes you have added, except **search**, will not be affected.

By default, the **search** route is as follows:
```ts title="app.route.ts"
{
  path: 'search', component: LoadingComponent,
    children: [
      { path: 'all', component: LoadingComponent },
      { path: '**', redirectTo: 'all', pathMatch: 'full' }
    ]
},
```

Each **children** will be constructed from the information of the **query** defined in the Administration.

By default, the "Tabs" defined for "Mint" are:

<img src={useBaseUrl('/img/routes/20241120090158.png')} alt='tabs' />

It is possible to configure other parameters via the **extras customization json files** in the **routes** section.

:::important
If the file does not exist, you can simply create it, but it must **ABSOLUTELY** be named: **routes**
:::

<img src={useBaseUrl('/img/routes/20241118165044.png')} alt='routes' />

Correspondence between the fields of the Json configuration file and the Angular routes.

| JSON configuration | Angular routes | Description                                                                                                                    |
| ------------------ | -------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| wsName             | queryName      | Query's name linked to this route. This parameter is usefull when you have multiples queries                                   |
| wsQueryTab         | wsQueryTab     | The query tab title associated with the query.                                                                                 |
| pathDisplayName    | display        | Text to display in the UI. When not set, the query's tab title is used if it's exists otherwise the route's path will be used. |
| icon               | iconClass      | The Fontawesome class associated with this path.                                                                               |

## Using Static Routes
By default, "Mint" uses dynamic routes for the **search** part, however, if you wish, you can use your own route creation system or even use static routes.

### Disable Dynamic Creation
The _autoLogin()_ function accepts a configuration parameter: `withCreateRoutes` which defaults to `true`. Once set to `false`, the application will use the routes you have defined in the **app.routes.ts** file.

```ts title="app.component.ts"
this.applicationService.autoLogin({ withCreateRoutes: false })
	.then((success) => {
	  if (success) {
		/* ... */
	  }
	})
	.catch((err) => { /* ... */ });
```

:::note
You can also set up your own route creation system based on your own specifications.
:::

:::warning
Be careful, you must have valid routes previously defined in your **app.routes.ts** file. Otherwise, the application will not work properly.
:::

Whether you use static routes or your own route creation method, you will need to provide each route with parameters so that they can be displayed correctly in the user interface.

These parameters must be specified in the **data** part of your route.

| Param√®tre  | Description                                                                                               |
| ---------- | --------------------------------------------------------------------------------------------------------- |
| queryName  | Name of a query set in the administration. If you don't specify anything, the default query will be used. |
| display    | The label you want to display in the UI. If none, the path's label will be used.                          |
| wsQueryTab | The name of the **tab** associated with the query you want to use.                                        |
| icon       | The icon you want to associate with the label in the UI.                                                  |


Exemple:
```json title="app.route.ts"
[
	...
	{
		path: "search", component: SearchComponent,
		children: [
			{
				path: "all",
				component: SearchAllComponent,
				data: {
					queryName: "_mint-query",
					display: "All Results",
					icon: "fas fa-globe"
				}
			},
			{ path: "**", redirectTo: 'all', pathMatch: 'full' }
		]
	}
	...
]
```

:::note
Of course, you can use any route name other than **search**.
:::

:::tip
To automatically use the **query** defined by default in the Administration, you can use our resolver: **queryNameResolver**

 ```ts
 import { queryNameResolver } from "@sinequa/atomic-angular";

 {
 	path: "search", component: SearchComponent,
 	resolve: { queryName: queryNameResolver },
 	children: [ ... ]
 }
```
All children of the **search** route will automatically inherit the parent's `queryName`.
:::

