<ng-container>
  <header class="h-1/3 flex">
    <img
      class="mx-auto mt-auto mb-16 w-64"
      src="assets/logo/large.svg"
      alt="Sinequa logo"
    />
  </header>

  <div class="grid grid-cols-[auto_750px_auto] grid-rows-[min-content_auto] gap-y-6 text-sm">
    <main class="col-start-2">
      <app-search-input class="w-full" (debounced)="searchText.set($event)" (validated)="search($event)">
        <app-autocomplete [text]="searchText()" (onClick)="autocompleteItemClicked($event)"/>
      </app-search-input>
    </main>

    <aside class="col-start-2 row-start-2 flex flex-col flex-wrap mt-8">
      <menu class="flex font-semibold">
        @for (tab of tabs(); track tab.label) {
        <li>
          <button
            class="tab aria-selected:text-primary aria-selected:border-primary"
            [attr.disabled]="tab.disabled ?? null"
            [attr.tabindex]="tab.disabled ? -1 : 0"
            [attr.aria-selected]="selectedTabId() === $index"
            (click)="selectTab(tab)"
            (keydown.enter)="selectTab(tab)"
          >
            <i class="fa-fw {{ tab.iconClass }}"></i>
            {{ tab.label }}
          </button>
        </li>
        }

        <li class="grow border-b border-neutral-300"></li>
      </menu>

      @for (tab of tabs(); track tab.label) {
      <div
        [ngClass]="{ hidden: selectedTabId() !== $index }"
        class="overflow-y-auto max-h-[208px] py-4"
      >
        <ng-container *ngComponentOutlet="tab.component" />
      </div>
      }
    </aside>
  </div>
</ng-container>

<app-drawer-stack></app-drawer-stack>
