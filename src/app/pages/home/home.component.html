<ng-container>
  <header class="h-1/3 flex">
    <img
      class="mx-auto mt-auto mb-16 w-64"
      src="assets/logo/large.svg"
      alt="Sinequa logo"
    />
  </header>

  <div class="grid grid-cols-[23%_auto_23%] grid-rows-[min-content_auto] gap-y-6">
    <main class="col-start-2">
      <app-search-input class="w-full" (debounced)="searchText.set($event)" (validated)="search($event)">
        <app-autocomplete [text]="searchText()" (onClick)="autocompleteItemClicked($event)"/>
      </app-search-input>
    </main>

    <aside class="col-start-2 row-start-2 flex flex-col flex-wrap mt-8">
      <menu class="flex font-semibold">
        @for (tab of tabs(); track tab.label) {
        <li>
          <button
            class="py-2 px-3 select-none border-b border-gray-200 hover:text-blue-500 hover:border-blue-500 focus:text-blue-500 focus:border-blue-500 focus:outline-none aria-selected:text-blue-500 aria-selected:border-blue-500"
            [ngClass]="{ 'text-gray-400 pointer-events-none': tab.disabled }"
            [attr.tabindex]="tab.disabled ? -1 : 0"
            [attr.aria-selected]="selectedTabId() === $index"
            (click)="selectTab(tab)"
            (keydown.enter)="selectTab(tab)"
          >
            <i class="fa-fw {{ tab.iconClass }}"></i>
            {{ tab.label }}
          </button>
        </li>
        }

        <li class="grow border-b border-gray-200"></li>
      </menu>

      @for (tab of tabs(); track tab.label) {
      <div
        [ngClass]="{ hidden: selectedTabId() !== $index }"
        class="overflow-y-auto max-h-[30vh] py-4"
      >
        <ng-container *ngComponentOutlet="tab.component" />
      </div>
      }
    </aside>
  </div>
</ng-container>

<app-drawer-stack></app-drawer-stack>
