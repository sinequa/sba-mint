<main class="col-start-2 col-span-2 mb-8 z-0">
  <app-filters
    class="sticky pt-4 pb-4 top-0 bg-gradient-to-b from-80% from-white"
  />

  <app-did-you-mean class="text-alert py-1" [result]="result()" />

  <div class="flex mt-4">
    <app-sort-selector
      class="ms-auto"
      [result]="result()!"
      (onSort)="onSort($event)"
    />
  </div>

  @if (query.isPending()) {
    <ul class="flex flex-col gap-2 mt-4">
      <li><app-article-default-skeleton /></li>
      <li><app-article-default-skeleton /></li>
      <li><app-article-default-skeleton /></li>
    </ul>
  }
  @else {
    <ul class="flex flex-col gap-2 mt-4">
      @for(page of query.data()?.pages; track page) {
        @for (article of page.records; track article.id) {
          <li>
            <app-article-default [article]="article" [strategy]="'replace'" />
          </li>
        }
        @if(page.records.length === 0){
          <li class="mt-8 text-neutral-500 italic">
            No result for &quot;<em class="not-italic font-semibold">{{ queryText() }}</em>&quot;
          </li>
        }
      }
    </ul>
    }

  <div infinity-scroll (loadMore)="nextPage()"></div>
</main>
